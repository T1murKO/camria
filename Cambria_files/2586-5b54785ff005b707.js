(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2586],{14285:function(e){"use strict";e.exports={getGlobalPrivyAuthUrl:()=>"https://auth.privy.io"}},99558:function(e,t,r){"use strict";var n=r(14285),a=r(34406);let i="cla04x0d00002nyb6oofp5dqh",o=a.env.VERCEL_GIT_COMMIT_SHA,s="97238FF8-F378-4218-98DF-B940C7AD8172";if("string"!=typeof i)throw Error("NEXT_PUBLIC_PRIVY_APP_ID needs to be defined");let c=(0,n.getGlobalPrivyAuthUrl)(),d="https://dashboard.privy.io";if(!d||"string"!=typeof d)throw Error("NEXT_PUBLIC_DASHBOARD_PRIVY_AUTH_URL must be defined");let l="https://dashboard.privy.io";l||console.warn("No Privy dashboard URL found, some dashboard admin actions like reporting to Slack will not work.");let u="https://1a1092d8126745b7b932d59dbcc3fc17@o4505001591177216.ingest.sentry.io/4505002745790464";if("string"!=typeof u)throw Error("Missing Sentry env vars");let f=parseFloat("0.05"),y=parseFloat("0"),w="4df5e2316331463a9130964bd6078dfa",v="fe9c30fc-3bc5-4064-91e2-6ab5887f8f4d";if("string"!=typeof w)throw Error("NEXT_PUBLIC_PRIVY_INFURA_ID must be set");if("string"!=typeof v)throw Error("NEXT_PUBLIC_PRIVY_BLAST_ID must be set");if("string"!=typeof s)throw Error("NEXT_PUBLIC_NEYNAR_API_KEY must be set");let p=Object.freeze({isTest:!1,isProduction:!0,isStaging:!1,isDevelopment:!1,PRIVY_APP_ID:i,PRIVY_ENV:"production",GLOBAL_PRIVY_AUTH_URL:c,DASHBOARD_PRIVY_AUTH_URL:d,DASHBOARD_URL:l,SENTRY_ENABLED:!0,SENTRY_DSN:u,SENTRY_SAMPLE_RATE:f,SENTRY_TRACES_SAMPLE_RATE:y,PRIVY_INFURA_ID:w,PRIVY_BLAST_ID:v,GIT_COMMIT_SHA:o,SPECIAL_EVENT_SIGNUP_ENABLED:!0,NEYNAR_API_KEY:s});t.Z=p},8934:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(98437),a=r(46396);class i extends a.u{set(e,t){let r=this.getWalletStorageKey(e),n={share:t.share,deviceId:t.deviceId};this._set(r,n)}get(e){let t=this.getWalletStorageKey(e);return this._get(t)}del(e){let t=this.getWalletStorageKey(e);this._del(t)}getWalletStorageKey(e){let{appId:t,userId:r,address:a}=e;return"privy_wallet:".concat(t,":").concat(r,":").concat((0,n.DY)(a))}constructor(e){super(e)}}let o=(()=>{try{if("undefined"!=typeof globalThis&&globalThis.localStorage)return new i(globalThis.localStorage)}catch(e){e instanceof DOMException&&"SecurityError"===e.name?console.debug("Security settings in your browser prevent access to local storage, used for persisting wallet state. Wallet information will be stored in-memory."):console.debug("Unknown issue loading local storage, used for persisting wallet state. Wallet information will be stored in-memory.")}return new i(new a.w)})();var s=o},41725:function(e,t,r){"use strict";r.d(t,{_r:function(){return v},EK:function(){return w},YF:function(){return eP},IY:function(){return b},js:function(){return m},IA:function(){return eF}});var n=r(95253),a=r(98437),i=r(68407),o=r(79489),s=r(90162);async function c(e,t){let{recoverySecret:r,filename:n}=t,a="recovery-secret-boundary",i="\r\n--".concat(a,"\r\n"),o=i+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify({name:n,mimeType:"text/plain",parents:["appDataFolder"]})+i+"Content-Type: text/plain\r\n\r\n"+r+"\r\n--".concat(a,"--"),c=await s.default.post("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",o,{headers:{"Content-Type":'multipart/related; boundary="'.concat(a,'"'),Authorization:"Bearer ".concat(e)}});return c.data.id}async function d(e,t){let{fileId:r}=t,n=await s.default.get("https://www.googleapis.com/drive/v3/files/".concat(r),{headers:{Authorization:"Bearer ".concat(e)},params:{alt:"media"},responseType:"text"});return n.data}let l={"user-passcode":"user_passcode_derived_recovery_key",privy:"privy_generated_recovery_key","google-drive":"google_drive_recovery_secret"};var u=r(8934);async function f(e){let{recoveryType:t}=e;if("user_passcode_derived_recovery_key"===t){let{recoveryPassword:r}=e,n=(0,a.a9)();return{encryptionKey:await (0,a.fq)(r,n),walletRecoveryOutput:{recoveryType:t,recoveryKeyDerivationSalt:n}}}if("privy_generated_recovery_key"===t){let e=await (0,a.eJ)();return{encryptionKey:e,walletRecoveryOutput:{recoveryType:t,encryptionKey:e}}}if("google_drive_recovery_secret"===t){var r,i,s;let d;let{recoveryAccessToken:l}=e,u=await (0,a.eJ)(),f=n.US.encode(await (0,a.Cw)(u)),y=(r=e.appId,i=e.userId,s=e.walletAddress,"privy-wallet-".concat(r,"-").concat(i,"-").concat((0,a.DY)(s),".txt"));try{d=await c(l,{recoverySecret:f,filename:y})}catch(e){throw new o.AY("error","Failed to write recovery secret to Google Drive")}return{encryptionKey:u,walletRecoveryOutput:{recoveryType:t,filename:y,fileId:d}}}throw Error("Unknown recovery type.")}async function y(e){let{recoveryType:t}=e;if("user_passcode_derived_recovery_key"===t){let{recoveryKeyDerivationSalt:t}=e;return{recovery_key_derivation_salt:n.US.encode(t)}}if("privy_generated_recovery_key"===t){let{encryptionKey:t}=e;return{recovery_key:n.US.encode(await (0,a.Cw)(t))}}if("google_drive_recovery_secret"===t){let{filename:t,fileId:r}=e;return{filename:t,file_id:r}}throw Error("Unknown recovery type: ".concat(t))}async function w(e){let{appId:t,userId:r,accessToken:s,recoveryPassword:c,recoveryMethod:d,recoveryAccessToken:w,recoveryPin:v}=e,p=c||v;if(void 0!==p&&!(0,a.pg)(p))throw new o.AY("invalid_request_arguments","Failed to create wallet: invalid recovery pin");let h=d?l[d]:void 0;h||(h=void 0!==p?"user_passcode_derived_recovery_key":"privy_generated_recovery_key");let{deviceShares:_,recoveryShares:g,wallet:m,rootNode:b}=await (0,a.Z9)(),[S,I]=_,[A,P]=g,F=function(e){let{recoveryType:t,appId:r,userId:n,walletAddress:a,recoveryPassword:i,recoveryAccessToken:s}=e;if("user_passcode_derived_recovery_key"===t){if(!i)throw new o.AY("invalid_request_arguments","Failed to create wallet: missing recovery password");if(s)throw new o.AY("invalid_request_arguments","Failed to create wallet: recovery access token should not be provided for user recovery secret protected wallets.");return{recoveryType:t,recoveryPassword:i}}if("privy_generated_recovery_key"===t){if(i)throw new o.AY("invalid_request_arguments","Failed to create wallet: recovery password should not be provided for privy generated recovery key wallets.");if(s)throw new o.AY("invalid_request_arguments","Failed to create wallet: recovery access token should not be provided for privy generated recovery key wallets.");return{recoveryType:t}}if("google_drive_recovery_secret"===t){if(!s)throw new o.AY("invalid_request_arguments","Failed to create wallet: missing recovery access token");if(i)throw new o.AY("invalid_request_arguments","Failed to create wallet: recovery password should not be provided for google drive recovery secret protected wallets.");return{recoveryType:t,recoveryAccessToken:s,appId:r,userId:n,walletAddress:a}}throw new o.AY("invalid_request_arguments","Failed to create wallet: unknown recovery type: ".concat(t))}({recoveryType:h,appId:t,userId:r,walletAddress:m.address,recoveryPassword:p,recoveryAccessToken:w}),[U,{encryptionKey:E,walletRecoveryOutput:k}]=await Promise.all([i.EK(t,s,m.address),f(F)]),[x,T]=await Promise.all([(0,a.Ym)(E),(0,a.pJ)(A,E)]),Y=(0,a.C8)(window.location.host,window.location.origin,m.address,U),R=await m.signMessage(Y),N=(0,a.b_)(),D=await y(k);return await i.TO(t,s,{message:Y,signature:R,device_id:N,device_auth_share:n.US.encode(I),recovery_auth_share:n.US.encode(P),encrypted_recovery_share:n.US.encode(T.encryptedShare),encrypted_recovery_share_iv:n.US.encode(T.encryptedShareIV),recovery_type:h,recovery_key_hash:n.US.encode(x),...D}),u.Z.set({appId:t,userId:r,address:m.address},{share:n.US.encode(S),deviceId:N}),{wallet:m,rootNode:b,walletIndex:0}}async function v(e,t,r,n){if(r.hdWalletIndex<=0)throw new o.AY("invalid_request_arguments","Failed to create additional wallet: invalid wallet index");let s=(0,a.ub)(n,r.hdWalletIndex),c=await i.EK(e,t,s.address),d=(0,a.C8)(window.location.host,window.location.origin,s.address,c),l=await s.signMessage(d);return await i.kR(e,t,(0,a.ub)(n,0).address,{message:d,signature:l,hd_node_index:r.hdWalletIndex}),s}let p=e=>!!e&&"object"==typeof e&&"response"in e&&!!e.response&&"object"==typeof e.response&&"data"in e.response&&!!e.response.data&&"object"==typeof e.response.data&&"code"in e.response.data&&"string"==typeof e.response.data.code,h=e=>p(e)&&"device_revoked"===e.response.data.code;async function _(e){let t,{appId:r,userId:o,accessToken:s,primaryAddress:c,walletIndex:d,mfaToken:l}=e,f={appId:r,userId:o,address:c},y=u.Z.get(f);if(!y)return null;let{share:w}=y;try{let{share:e}=await i.dq(r,s,c,y.deviceId,l);t=e}catch(e){if(h(e))return u.Z.del(f),null;throw e}try{let e=await (0,a.Ks)({shares:[n.US.decode(w),n.US.decode(t)],primaryAddress:c,walletIndex:d});return e}catch(e){return u.Z.del(f),null}}var g=r(7186);async function m(e){var t;let{cachedWallet:r,appId:n,userId:s,primaryAddress:c,walletIndex:d,accessToken:l,mfaCode:u,mfaMethod:f}=e;if(!(0,a.UJ)(c))throw new o.AY("invalid_request_arguments","Failed to initialize wallet: missing or invalid wallet address");let y=null===(t=g.Z.get({appId:n,userId:s}))||void 0===t?void 0:t.token;if(u&&f)try{let e=await i.bf(n,l,f,u);g.Z.set({appId:n,userId:s},e),y=e.token}catch(e){throw new o.AY("missing_or_invalid_mfa","MFA verification failed")}if(r&&!y&&(0,a.R6)((0,a.LY)(r.rootNode,0).address,c)){if(r.walletIndex===d)return r;{let e=(0,a.ub)(r.rootNode,d);return{rootNode:r.rootNode,wallet:e,walletIndex:d}}}let w=await _({appId:n,userId:s,accessToken:l,primaryAddress:c,walletIndex:d,mfaToken:null!=y?y:null});if(!w)throw new o.AY("wallet_not_on_device","Failed to initialize wallet: wallet with address '".concat(c,"' not loaded on this device"));return w}async function b(e){let t,{appId:r,userId:s,accessToken:c,data:l}=e,{address:f,recoveryAccessToken:y}=l,w=l.recoveryPassword||l.recoveryPin;if(!(0,a.UJ)(f))throw new o.AY("invalid_request_arguments","Failed to recover wallet: missing or invalid wallet address");if(void 0!==w&&!(0,a.pg)(w))throw new o.AY("invalid_request_arguments","Failed to recover wallet: invalid recovery pin");let v=await S({appId:r,userId:s,accessToken:c,mfaMethod:l.mfaMethod,mfaCode:l.mfaCode}),{recovery_type:p,recovery_key_derivation_salt:h,recovery_code:_,recovery_key:g,file_id:m}=await i.wt(r,c,f);if("user_passcode_derived_recovery_key"===p){if(!w)throw new o.AY("error","Failed to recover wallet: user passcode required and none found");if(!h)throw new o.AY("error","Failed to recover wallet: cannot retrieve salt for user-supplied passcode derived wallet");t=await (0,a.fq)(w,n.US.decode(h))}else if("privy_passcode_derived_recovery_key"===p){if(!h)throw new o.AY("error","Failed to recover wallet: cannot retrieve salt for Privy-supplied passcode derived wallet");if(!_)throw new o.AY("error","Failed to recover wallet: cannot retrieve Privy-supplied passcode");t=await (0,a.fq)(_,n.US.decode(h))}else if("privy_generated_recovery_key"===p){if(!g)throw new o.AY("error","Failed to recover wallet: cannot retrieve Privy-generated recovery key");t=await (0,a.wV)(n.US.decode(g))}else if("google_drive_recovery_secret"===p){let e;if(!m)throw new o.AY("error","Failed to recover wallet: cannot retrieve fileId for Google Drive recovery secret derived recovery key");if(!y)throw new o.AY("error","Failed to recover wallet: missing recovery auth access token");try{e=await d(y,{fileId:m})}catch(e){throw new o.AY("error","Failed to recover wallet: failed to read recovery code from Google Drive")}if(!e)throw new o.AY("error","Failed to recover wallet: missing recovery secret from Google Drive");t=await (0,a.wV)(n.US.decode(e))}if(!t)throw new o.AY("error","Failed to recover wallet recovery key");let b=await (0,a.Ym)(t),{recoveryAuthShare:A,encryptedRecoveryShare:P,encryptedRecoveryShareIV:F}=await I({appId:r,accessToken:c,address:f,recoveryKeyHash:n.US.encode(b),mfaToken:v}),U=await (0,a.tN)(n.US.decode(P),n.US.decode(F),t),{wallet:E}=await (0,a.Ks)({shares:[U,n.US.decode(A)],primaryAddress:f,walletIndex:0}),[k,x]=await (0,a.Uz)(E),T=(0,a.b_)();return await i.Uu(r,c,f,T,n.US.encode(x)),u.Z.set({appId:r,userId:s,address:f},{share:n.US.encode(k),deviceId:T}),E}async function S(e){let{appId:t,userId:r,accessToken:n,mfaMethod:a,mfaCode:s}=e;if(!a||!s)return null;try{let e=await i.bf(t,n,a,s);return g.Z.set({appId:t,userId:r},e),e.token}catch(e){throw new o.AY("missing_or_invalid_mfa","MFA verification failed")}}async function I(e){let{appId:t,accessToken:r,address:n,recoveryKeyHash:a,mfaToken:s}=e;try{let[e,o]=await Promise.all([i.q9(t,r,n,s),i.OK(t,r,n,a)]);return{recoveryAuthShare:e.share,encryptedRecoveryShare:o.encrypted_recovery_share,encryptedRecoveryShareIV:o.encrypted_recovery_share_iv}}catch(e){var c;if((null==e?void 0:null===(c=e.response)||void 0===c?void 0:c.status)===422)throw new o.AY("invalid_recovery_pin","Failed to recover wallet: invalid recovery pin");throw new o.AY("error","Failed to recover wallet: unknown error")}}var A=r(50539),P=r(75388),F=r(1890),U=r(58105),E=r(77962);let k=[P.yu.id,P.v8.id],x=e=>({maxPriorityFee:(0,E.parseUnits)(e.maxPriorityFee.toFixed(9),"gwei").toHexString(),maxFee:(0,E.parseUnits)(e.maxFee.toFixed(9),"gwei").toHexString()}),T=e=>({safeLow:x(e.safeLow),standard:x(e.standard),fast:x(e.fast)}),Y=async e=>{let t="";switch(e){case P.yu.id:t="https://gasstation.polygon.technology/v2";break;case P.v8.id:t="https://gasstation-testnet.polygon.technology/v2";break;default:throw Error("chainId ".concat(e," does not support polygon gas stations"))}let r=await fetch(t),n=await r.json();return T(n)},R=["eth_sign","eth_populateTransactionRequest","eth_signTransaction","eth_sendTransaction","personal_sign","eth_signTypedData_v4"];var N=r(43210),D=r(57122),L=r(86900),C=r(56334),K=r(42622),q=r(7301),G=r(26389),M=r(43194),J=r(60586),O=r(188),V=r(8581),Z=r(6728),B=r(6891),z=r(35194),H=r(13141),W=r(66403),j=r(67924),$=r(80304),X=r(98494),Q=r(99336),ee=r(63468),et=r(52961),er=r(57393),en=r(57924),ea=r(7735),ei=r(63441),eo=r(3884),es=r(99558),ec=r(15307);let ed={[N.y.id]:N.y,[D.J.id]:D.J,[L.Z.id]:L.Z,[C.p.id]:C.p,[K.c.id]:K.c,[q.u.id]:q.u,[G.J.id]:G.J,[M.L.id]:M.L,[J.D.id]:J.D,[O.$.id]:O.$,[V.y.id]:V.y,[Z.J.id]:Z.J,[B.w.id]:B.w,[z.F.id]:z.F,[H.M.id]:H.M,[W.R.id]:W.R,[j.P.id]:j.P,[$.S.id]:$.S,[X.v.id]:X.v,[Q.l.id]:Q.l,[ee.O.id]:ee.O,[et.y.id]:et.y,[er.v.id]:er.v,[en.v.id]:en.v,[ea.l.id]:ea.l,[ei.f.id]:ei.f,[eo.N.id]:eo.N},el={8453:"https://base-mainnet.blastapi.io",84531:"https://base-goerli.blastapi.io"},eu=e=>{let t=ed[e];if(!t)throw Error("Unsupported chainId ".concat(e));return t},ef=e=>{var t,r;let n;let a=eu(e);if(null===(t=a.rpcUrls.infura)||void 0===t?void 0:t.http[0]){if(!es.Z.PRIVY_INFURA_ID)throw Error("Missing Infura ID for RPC URL");n=(0,ec.vE)(a.rpcUrls.infura.http[0],es.Z.PRIVY_INFURA_ID)}else if(el[e]){if(!es.Z.PRIVY_BLAST_ID)throw Error("Missing Blast ID for RPC URL");n=(0,ec.vE)(el[e],es.Z.PRIVY_BLAST_ID)}else n=null===(r=a.rpcUrls.default)||void 0===r?void 0:r.http[0];if(!n)throw Error("No RPC url found for ".concat(e));return n};var ey=r(48834).Buffer;function ew(e){let t=e.chainId||P.RJ.id,r=ef(t);return new F.cK(r)}function ev(e){let t="string"==typeof e?JSON.parse(e):e;return void 0!==t.chainId?{...t,chainId:Number(t.chainId)}:t}function ep(e){return(0,U.isHexString)(e)?ey.from(e.slice(2),"hex"):ey.from(e)}async function eh(e,t,r){return eI(e.address,t),(0,A.personalSign)({privateKey:ep(e.privateKey),data:r})}async function e_(e,t,r,n){return eI(e.address,t),(0,A.signTypedData)({data:r,privateKey:ep(e.privateKey),version:n})}async function eg(e,t){let{method:r,params:n}=t;if(!R.includes(r))throw Error("Unsupported JSON RPC method: ".concat(r));switch(r){case"personal_sign":{let t=await eh(e,n[1],n[0]);return{method:r,data:t}}case"eth_populateTransactionRequest":{let t=ev(n[0]),a=await eb(e,t);return{method:r,data:a}}case"eth_sign":{eI(e.address,n[0]);let t=await e.signMessage(n[1]);return{method:r,data:t}}case"eth_signTypedData_v4":{let t=function(e){if("string"!=typeof e)return e;try{let t=JSON.parse(e);return void 0!==t.domain.chainId&&(t.domain.chainId=Number(t.domain.chainId)),t}catch(e){throw Error("Failed to deserialize message with error: ".concat(e))}}(n[1]),a=await e_(e,n[0],t,A.SignTypedDataVersion.V4);return{method:r,data:a}}case"eth_signTransaction":{let t=ev(n[0]),a=await e.signTransaction(t);return{method:r,data:a}}case"eth_sendTransaction":{let t=ev(n[0]),a=await em(e,t);return{method:r,data:a}}}}async function em(e,t){try{let r=await eb(e,t);!function(e){for(let t of["gasLimit","gasPrice","value","maxPriorityFeePerGas","maxFeePerGas"]){let r=e[t];if(void 0!==r){if(!function(e){let t="number"==typeof e,r="bigint"==typeof e,n="string"==typeof e&&(0,U.isHexString)(e);return t||r||n}(r))throw Error("Transaction request property '".concat(t,"' must be a valid number, bigint, or hex string representing a quantity"));if("number"!=typeof e.chainId)throw Error("Transaction request property 'chainId' must be a number")}}}(r);let n=ew(r),a=e.connect(n),{hash:i}=await a.sendTransaction(r);return i}catch(e){throw eS(e)}}async function eb(e,t){let r=ew(t),n=e.connect(r);try{if(t.gas&&(t.gasLimit=t.gas,delete t.gas),t.chainId&&k.includes(t.chainId)&&(!t.maxPriorityFeePerGas||!t.maxFeePerGas))try{let{standard:e}=await Y(t.chainId);t.maxPriorityFeePerGas||(t.maxPriorityFeePerGas=e.maxPriorityFee),t.maxFeePerGas||(t.maxFeePerGas=e.maxFee)}catch(e){throw Error("Failed to set gas prices from Polygon gas station with error: ".concat(e,"."))}let e=await n.populateTransaction({to:t.to,from:t.from,nonce:t.nonce,gasLimit:t.gasLimit,gasPrice:t.gasPrice,data:t.data,value:t.value,chainId:t.chainId,type:t.type,accessList:t.accessList,maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas});return function(e){let t={};return void 0!==e.to&&(t.to=e.to),void 0!==e.data&&(t.data=e.data),void 0!==e.chainId&&(t.chainId=e.chainId),void 0!==e.type&&(t.type=e.type),void 0!==e.accessList&&(t.accessList=e.accessList),void 0!==e.nonce&&(t.nonce=eA(e.nonce)),void 0!==e.gasLimit&&(t.gasLimit=eA(e.gasLimit)),void 0!==e.gasPrice&&(t.gasPrice=eA(e.gasPrice)),void 0!==e.value&&(t.value=eA(e.value)),void 0!==e.maxFeePerGas&&(t.maxFeePerGas=eA(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=eA(e.maxPriorityFeePerGas)),t}(e)}catch(e){throw eS(e)}}function eS(e){let t=e.code,r=e.reason;return"INSUFFICIENT_FUNDS"===t?new o.AY("insufficient_funds","Wallet has insufficient funds for this transaction"):r?new o.AY("error",r):"string"==typeof e?Error(e):e}function eI(e,t){if(!(0,a.R6)(e,t))throw Error("Signer ".concat(e," can not sign on behalf of ").concat(t))}function eA(e){if("number"==typeof e||"bigint"==typeof e||"string"==typeof e)return e;if("function"==typeof e.toHexString)return e.toHexString();throw Error("Expected numeric value but received ".concat(e))}function eP(e,t){let{address:r,request:n}=t;if(!(0,a.UJ)(r))throw new o.AY("invalid_request_arguments","Failed to service JSON RPC request: missing or invalid wallet address");return eg(e,n)}async function eF(e){let{appId:t,userId:r,accessToken:s,wallet:c,data:{recoveryPassword:d}}=e;if(!(0,a.pg)(d))throw new o.AY("invalid_request_arguments","Failed to set recovery password: missing or invalid recovery password");let l=u.Z.get({appId:t,userId:r,address:c.address});if(!l)throw new o.AY("wallet_not_on_device","Failed to initialize wallet: wallet with address '".concat(c.address,"' not loaded on this device"));let[f,y]=await Promise.all([(0,a.Uz)(c),(0,a.Uz)(c)]),[w,v]=f,[p,h]=y,{wallet:_}=await (0,a.Ks)({shares:[p,h],primaryAddress:c.address,walletIndex:0}),g=(0,a.a9)(),[m,b]=await Promise.all([i.EK(t,s,_.address),(0,a.fq)(d,g)]),[S,I]=await Promise.all([(0,a.Ym)(b),(0,a.pJ)(p,b)]),A=(0,a.C8)(window.location.host,window.location.origin,_.address,m),P=await _.signMessage(A);return await i.oB(t,s,{message:A,signature:P,device_id:l.deviceId,device_auth_share:n.US.encode(v),recovery_auth_share:n.US.encode(h),encrypted_recovery_share:n.US.encode(I.encryptedShare),encrypted_recovery_share_iv:n.US.encode(I.encryptedShareIV),recovery_key_hash:n.US.encode(S),recovery_key_derivation_salt:n.US.encode(g)}),u.Z.set({appId:t,userId:r,address:_.address},{share:n.US.encode(w),deviceId:l.deviceId}),_}},7186:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(46396);class a extends n.u{set(e,t){let r=this.getMfaTokenStorageKey(e);this._set(r,t)}get(e){let t=this.getMfaTokenStorageKey(e);return this._get(t)}del(e){let t=this.getMfaTokenStorageKey(e);this._del(t)}getMfaTokenStorageKey(e){let{appId:t,userId:r}=e;return"privy:mfa:".concat(t,":").concat(r)}constructor(e){super(e)}}let i=(()=>{try{if("undefined"!=typeof globalThis&&globalThis.localStorage)return new a(globalThis.localStorage)}catch(e){e instanceof DOMException&&"SecurityError"===e.name?console.debug("Security settings in your browser prevent access to local storage, used for persisting wallet state. Wallet information will be stored in-memory."):console.debug("Unknown issue loading local storage, used for persisting wallet state. Wallet information will be stored in-memory.")}return new a(new n.w)})();var o=i},46686:function(e,t,r){"use strict";r.d(t,{_:function(){return a},r:function(){return i}});var n=r(40620);function a(e,t){return n.Us(new URL("/api/v1/apps/".concat(e,"/jwks.json"),t))}async function i(e,t,r){if(!e)return null;try{var a;let i=await n._f(e,t,{typ:"JWT",algorithms:["ES256"],issuer:"privy.io",audience:r}),o=(a=i.payload.sub,"string"==typeof a&&/^did:privy:.+/.test(a)?a.replace(/^did:privy:/,""):null);if(!o)return null;return{userId:o,appId:r}}catch(e){return null}}},68407:function(e,t,r){"use strict";r.d(t,{E2:function(){return y},EK:function(){return a},F5:function(){return _},GH:function(){return p},J_:function(){return v},Mc:function(){return h},NO:function(){return g},OK:function(){return u},P3:function(){return I},TO:function(){return i},Uu:function(){return f},bf:function(){return S},dq:function(){return c},kR:function(){return o},ls:function(){return w},oB:function(){return s},q9:function(){return d},wt:function(){return l}});var n=r(90162);async function a(e,t,r){let a=await n.default.post("/api/v1/embedded_wallets/init",{address:r},A(e,t));return a.data.nonce}async function i(e,t,r){let a=await n.default.post("/api/v1/embedded_wallets",r,A(e,t));return a.data}async function o(e,t,r,a){let i=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/add_wallet"),a,A(e,t));return i.data}async function s(e,t,r){let a=await n.default.patch("/api/v1/embedded_wallets",r,A(e,t));return a.data}async function c(e,t,r,a,i){let o=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/share"),{device_id:a},A(e,t,i));return o.data}async function d(e,t,r,a){let i=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/recovery/auth_share"),{},A(e,t,a));return i.data}async function l(e,t,r){let a=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/recovery/key_material"),{},A(e,t));return a.data}async function u(e,t,r,a){let i=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/recovery/shares"),{recovery_key_hash:a},A(e,t));return i.data}async function f(e,t,r,a,i){let o=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/recovery/device"),{device_id:a,device_auth_share:i},A(e,t));return o.data}function y(e,t,r,a,i,o){n.default.post("/api/v1/analytics_events",{event_name:a,client_id:r,payload:{...i||{},clientTimestamp:o?o.toISOString():new Date().toISOString()}},A(e,t)).catch()}async function w(e,t,r){let a=await n.default.post("/api/v1/mfa/totp/init",{action:"enroll"},A(e,t,r));return a.data}async function v(e,t,r,a){let i=await n.default.post("/api/v1/mfa/passwordless_sms/init",{phoneNumber:r,action:"enroll"},A(e,t,a));return i.data}async function p(e,t,r){let a=await n.default.post("/api/v1/mfa/totp/enroll",{code:r},A(e,t));return a.data}async function h(e,t,r,a){let i=await n.default.post("/api/v1/mfa/passwordless_sms/enroll",{phoneNumber:a,code:r},A(e,t));return i.data}async function _(e,t,r){let a=await n.default.post("/api/v1/mfa/passwordless_sms/unenroll",{},A(e,t,r));return a.data}async function g(e,t,r){let a=await n.default.post("/api/v1/mfa/totp/unenroll",{},A(e,t,r));return a.data}async function m(e,t,r){let a=await n.default.post("/api/v1/mfa/passwordless_sms/verify",{code:r},A(e,t));return a.data}async function b(e,t,r){let a=await n.default.post("/api/v1/mfa/totp/verify",{code:r},A(e,t));return a.data}async function S(e,t,r,n){switch(r){case"sms":return await m(e,t,n);case"totp":return await b(e,t,n);default:throw Error("Unknown mfa method: ".concat(r))}}async function I(e,t,r){let a=await n.default.post("/api/v1/farcaster/signer/init",{ed25519_public_key:t},A(e,r.accessToken,r.mfaToken));return a.data}function A(e,t,r){return{headers:{"privy-app-id":e,authorization:"Bearer ".concat(t),...r?{"privy-mfa-token":r}:{}},withCredentials:!0}}},79489:function(e,t,r){"use strict";r.d(t,{AY:function(){return i},d2:function(){return o},u$:function(){return a}});let n=["error","invalid_request_arguments","wallet_not_on_device","invalid_recovery_pin","insufficient_funds","missing_or_invalid_mfa","twilio_verification_failed"],a="error";class i extends Error{constructor(e,t){super(t),this.type=e}}function o(e){let t=e.type;return"string"==typeof t&&n.includes(t)}},46396:function(e,t,r){"use strict";r.d(t,{u:function(){return a},w:function(){return n}});class n{get length(){return Object.keys(this.data).length}getItem(e){let t=this.data[e];return void 0!==t?t:null}setItem(e,t){this.data[e]=String(t)}removeItem(e){delete this.data[e]}clear(){this.data={}}constructor(){this.data={}}}class a{_set(e,t){this.storage.setItem(e,JSON.stringify(t))}_get(e){let t=this.storage.getItem(e);if("string"!=typeof t)return null;try{return JSON.parse(t)}catch(t){return this.storage.removeItem(e),null}}_del(e){this.storage.removeItem(e)}constructor(e){this.storage=e}}},98437:function(e,t,r){"use strict";r.d(t,{C8:function(){return b},Cw:function(){return F},DY:function(){return w},Ks:function(){return p},LY:function(){return _},R6:function(){return v},UJ:function(){return y},Uz:function(){return m},Ym:function(){return E},Z9:function(){return f},a9:function(){return S},b_:function(){return I},eJ:function(){return P},fq:function(){return A},pJ:function(){return k},pg:function(){return u},tN:function(){return x},ub:function(){return h},wV:function(){return U}});var n=r(95253),a=r(61),i=r(58194),o=r(14205),s=r(75398),c=r(58105),d=r(10419);function l(e){return crypto.getRandomValues(new Uint8Array(e))}function u(e){return"string"==typeof e&&/^[a-zA-Z0-9!@#$%^&*()\-_+.]{6,}$/.test(e)}async function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;if(![128,160,192,224,256].includes(e))throw Error("invalid entropy size");let t=l(e/8),r=await (0,d.V)(t,2,2),n=await (0,d.V)(t,2,2),a=g(t),i=h(a,0);return{deviceShares:r,recoveryShares:n,wallet:i,rootNode:a}}function y(e){return i.isAddress(e)}function w(e){return i.getAddress(e)}function v(e,t){return w(e)===w(t)}async function p(e){let{shares:t,primaryAddress:r,walletIndex:n}=e,a=await (0,d.$)(t),i=g(a),o=_(i,0),s=h(i,n);if(!v(o.address,r))throw Error("Failed to reconstruct the expected wallet from Shamir shares");return{rootNode:i,wallet:s,walletIndex:n}}function h(e,t){return new a.Wallet(_(e,t))}function _(e,t){return e.derivePath("m/44'/60'/0'/0/".concat(t))}function g(e){let t=o.entropyToMnemonic(e);return c.HDNode.fromMnemonic(t)}function m(e){if(!e.mnemonic)throw Error("Failed to get entropy. Missing Mnemonic");let t=o.mnemonicToEntropy(e.mnemonic.phrase),r=s.arrayify(t);return(0,d.V)(r,2,2)}function b(e,t,r,n){return"".concat(e," wants you to sign in with your Ethereum account:\n").concat(r,"\n\nYou are proving you own ").concat(r,".\n\nURI: ").concat(t,"\nVersion: 1\nChain ID: 1\nNonce: ").concat(n,"\nIssued At: ").concat(new Date().toISOString(),"\nResources:\n- https://privy.io")}function S(){return l(32)}function I(){return n.Jq.encode(l(16))}function A(e,t){return T(new TextEncoder().encode(e),t)}function P(){return crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function F(e){return new Uint8Array(await crypto.subtle.exportKey("raw",e))}function U(e){return crypto.subtle.importKey("raw",e,"AES-GCM",!0,["encrypt","decrypt"])}async function E(e){let t=await crypto.subtle.exportKey("raw",e),r=await crypto.subtle.digest("SHA-256",t);return new Uint8Array(r)}async function k(e,t){let r=l(12),n=await Y(e,r,t);return{encryptedShare:n,encryptedShareIV:r}}function x(e,t,r){return R(e,t,r)}async function T(e,t){if(32!==t.byteLength)throw Error("pbkdf2 salt length should be 32 bytes");let r=await crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",salt:t,hash:"SHA-512",iterations:21e5},r,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function Y(e,t,r){let n=await crypto.subtle.encrypt({iv:t,name:"AES-GCM"},r,e);return new Uint8Array(n)}async function R(e,t,r){let n=await crypto.subtle.decrypt({iv:t,name:"AES-GCM"},r,e);return new Uint8Array(n)}},15307:function(e,t,r){"use strict";function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}r.d(t,{R1:function(){return i},fm:function(){return n},oH:function(){return o},p6:function(){return a},vE:function(){return s}});let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{weekday:"long",year:"numeric",month:"short",day:"numeric"};return new Date(1e3*e).toLocaleDateString("en-us",t)},i=e=>{if(!e)return"";let t=e.slice(0,5),r=e.slice(e.length-4,e.length);return"".concat(t,"...").concat(r)},o=e=>!!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),s=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.endsWith("/")?e:"".concat(e,"/"),a=new URL(t,n);for(let[e,t]of Object.entries(r))a.searchParams.set(e,t);return a.href}},29005:function(){},45179:function(){},33196:function(){},66396:function(){},85338:function(){}}]);